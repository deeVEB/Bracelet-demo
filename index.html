<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Bracelet Designer</title>
<style>
  body { font-family: sans-serif; text-align: center; margin: 20px; background: #f9f9f9; }
  #bracelet-container { position: relative; display: inline-block; margin-top: 20px; }
  #bracelet { max-width: 400px; border: 2px solid #ddd; border-radius: 10px; cursor: crosshair; }
  .hotspot {
    position: absolute; width: 20px; height: 20px;
    border-radius: 50%; background: red; cursor: pointer;
    transform: translate(-50%, -50%);
  }
  #export { margin-top: 20px; padding: 10px 20px; }
</style>
</head>
<body>

<h2>Bracelet Designer (Private)</h2>
<p>Step 1: Upload your bracelet image<br>
Step 2: Click the bracelet to add hotspots<br>
Step 3: Add popup content (text / image / video)<br>
Step 4: Export design as JSON</p>

<input type="file" id="upload" accept="image/*"><br>
<button id="export">Export Design</button>

<div id="bracelet-container">
  <img id="bracelet" src="" alt="Bracelet">
</div>

<script>
const upload = document.getElementById('upload');
const bracelet = document.getElementById('bracelet');
const container = document.getElementById('bracelet-container');
const exportBtn = document.getElementById('export');
let hotspots = [];
let braceletImage = "";

upload.addEventListener('change', e => {
  const file = e.target.files[0];
  if (!file) return;
  const reader = new FileReader();
  reader.onload = ev => {
    bracelet.src = ev.target.result;
    braceletImage = ev.target.result;
  };
  reader.readAsDataURL(file);
});

container.addEventListener('click', e => {
  if (e.target !== bracelet) return;
  const rect = bracelet.getBoundingClientRect();
  const x = ((e.clientX - rect.left) / rect.width) * 100;
  const y = ((e.clientY - rect.top) / rect.height) * 100;

  const hotspot = document.createElement('div');
  hotspot.className = 'hotspot';
  hotspot.style.left = `${x}%`;
  hotspot.style.top = `${y}%`;

  const type = prompt("Popup type: text, image, or video?");
  let content = "";
  if (type === 'text') {
    content = prompt("Enter message:");
  } else if (type === 'image') {
    content = prompt("Enter image URL:");
  } else if (type === 'video') {
    content = prompt("Enter video URL (mp4):");
  } else {
    return;
  }

  container.appendChild(hotspot);
  hotspots.push({x, y, type, content});
});

exportBtn.addEventListener('click', () => {
  const data = { braceletImage, hotspots };
  const blob = new Blob([JSON.stringify(data)], {type:'application/json'});
  const url = URL.createObjectURL(blob);
  const a = document.createElement('a');
  a.href = url;
  a.download = 'bracelet.json';
  a.click();
  URL.revokeObjectURL(url);
});
</script>
</body>
</html>
